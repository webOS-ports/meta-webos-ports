From b75d872db40639aa2b605f17da5db2db135339b6 Mon Sep 17 00:00:00 2001
From: Herrie <Github.com@herrie.org>
Date: Mon, 22 Jan 2024 06:38:15 +0100
Subject: [PATCH] g-camera-pipeline: Add generic config

So we can build on other targets as well.

Signed-off-by: Herman van Hazendonk <github.com@herrie.org>
---
Upstream-Status: Inappropriate [LuneOS specific]

 src/cameraplayer/CMakeLists.txt            |  4 +-
 src/cameraplayer/generic/gst_debug.conf    | 11 ++++
 src/cameraplayer/generic/gst_elements.conf | 59 ++++++++++++++++++++++
 3 files changed, 73 insertions(+), 1 deletion(-)
 create mode 100644 src/cameraplayer/generic/gst_debug.conf
 create mode 100644 src/cameraplayer/generic/gst_elements.conf

diff --git a/src/cameraplayer/CMakeLists.txt b/src/cameraplayer/CMakeLists.txt
index a146bb7..16c38da 100755
--- a/src/cameraplayer/CMakeLists.txt
+++ b/src/cameraplayer/CMakeLists.txt
@@ -151,7 +151,9 @@ elseif (${WEBOS_TARGET_MACHINE} STREQUAL "qemux86" OR ${WEBOS_TARGET_MACHINE} ST
   install(FILES ./qemux86/gst_debug.conf DESTINATION /etc/g-camera-pipeline)
   install(FILES ./qemux86/gst_elements.conf DESTINATION /etc/g-camera-pipeline)
 else()
-  message(FATAL_ERROR the "Check WEBOS_TARGET_MACHINE: " ${WEBOS_TARGET_MACHINE})
+  message(Status "Using generic config files for machine: " ${WEBOS_TARGET_MACHINE})
+  install(FILES ./generic/gst_debug.conf DESTINATION /etc/g-camera-pipeline)
+  install(FILES ./generic/gst_elements.conf DESTINATION /etc/g-camera-pipeline)
 endif()
 
 install(TARGETS cmp-player DESTINATION lib)
diff --git a/src/cameraplayer/generic/gst_debug.conf b/src/cameraplayer/generic/gst_debug.conf
new file mode 100644
index 0000000..96dbe5e
--- /dev/null
+++ b/src/cameraplayer/generic/gst_debug.conf
@@ -0,0 +1,11 @@
+{
+    "license" : "Copyright (c) 2021 LG Electronics, Inc. Licensed under the Apache License, Version 2.0 (the \"License\");  you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 ss required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. SPDX-License-Identifier: Apache-2.0",
+
+    "gst_debug" : [
+        {
+            "GST_DEBUG" : "",
+            "GST_DEBUG_FILE" : "/tmp/gst.log",
+            "GST_DEBUG_DUMP_DOT_DIR" : "/tmp"
+        }
+    ]
+}
diff --git a/src/cameraplayer/generic/gst_elements.conf b/src/cameraplayer/generic/gst_elements.conf
new file mode 100644
index 0000000..98ec52c
--- /dev/null
+++ b/src/cameraplayer/generic/gst_elements.conf
@@ -0,0 +1,59 @@
+{
+    "license" : "Copyright (c) 2021 LG Electronics, Inc. Licensed under the Apache License, Version 2.0 (the \"License\");  you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 ss required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. SPDX-License-Identifier: Apache-2.0",
+    "platform" : "Generic Platform",
+    "gst_elements" : [
+        {
+            "audio-sink" : {"name" : "alsasink",
+                "properties" : {
+                    "device" : "hw:0,0"
+                }
+            },
+            "video-sink" : {"name" : "waylandsink"},
+            "video-converter" : {"name" : "videoconvert"}
+        },
+        {
+            "audio-sink" : {"name" : "alsasink",
+                "properties" : {
+                    "device" : "hw:0,0"
+                }
+            },
+            "audiosink-queue" : {"name" : "queue"},
+            "video-sink" : {"name" : "waylandsink"},
+            "video-converter" : {"name" : "videoconvert",
+                "properties" : {
+                    "caps" : "video/x-raw, format=RGB16"
+                }
+            },
+            "video-queue" : "",
+
+            "audio-codec-aac" : {"name" : "avdec_aac"},
+            "audio-codec-mp3" : {"name" : ""},
+            "audio-codec-pcm" : {"name" : "adpcmdec"},
+            "audio-codec-vorbis" : {"name" : ""},
+            "audio-codec-flac" : {"name" : ""},
+            "audio-codec-amr_nb" : {"name" : ""},
+            "audio-codec-amr_wb" : {"name" : ""},
+            "audio-codec-pcm_mulaw" : {"name" : ""},
+            "audio-codec-gsm_ms" : {"name" : ""},
+            "audio-codec-pcm_s16be" : {"name" : ""},
+            "audio-codec-pcm_s24be" : {"name" : ""},
+            "audio-codec-opus" : {"name" : ""},
+            "audio-codec-eac3" : {"name" : "avdec_ac3"},
+            "audio-codec-pcm_alaw" : {"name" : ""},
+            "audio-codec-alac" : {"name" : ""},
+            "audio-codec-ac3" : {"name" : "avdec_ac3"},
+            "audio-codec-dts" : {"name" : "avdec_dca"},
+
+            "video-codec-h264" : {"name" : ""},
+
+            "video-codec-vc1" : {"name" : ""},
+            "video-codec-mpeg2" : {"name" : ""},
+            "video-codec-mpeg4" : {"name" : ""},
+            "video-codec-theora" : {"name" : ""},
+            "video-codec-vp8" : {"name" : ""},
+            "video-codec-vp9" : {"name" : ""},
+            "video-codec-h265" : {"name" : "avdec_h265"},
+            "video-codec-mjpeg" : {"name" : "jpegdec"}
+        }
+    ]
+}

From 56601523941c557245742f72b8882949db16005f Mon Sep 17 00:00:00 2001
From: Martin Jansa <martin2.jansa@lgepartner.com>
Date: Wed, 1 Feb 2023 21:47:36 +0000
Subject: [PATCH] Fix build with gcc-13

:Release Notes:

:Detailed Notes:
Fixes:
http://gecko.lge.com/Errors/Details/529521

FAILED: CMakeFiles/bluez5.dir/src/bluez5obexsession.cpp.o
TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot-native/usr/bin/x86_64-webos-linux/x86_64-webos-linux-g++ -Dbluez5_EXPORTS -ITOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot/usr/include/glib-2.0 -ITOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot/usr/lib/glib-2.0/include -ITOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot/usr/include/libmount -ITOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot/usr/include/blkid -ITOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot/usr/include/gio-unix-2.0 -ITOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot/usr/include/uuid -ITOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/git/src -ITOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/build/Configured/src -m64 -march=core2 -mtune=core2 -msse3 -mfpmath=sse -fstack-protector-strong  -O2 -D_FORTIFY_SOURCE=2  -Werror=return-type  --sysroot=TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot  -O2 -pipe -g -feliminate-unused-debug-types -fmacro-prefix-map=TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/git=/usr/src/debug/bluetooth-sil-bluez5/0.1.0-80-r8  -fdebug-prefix-map=TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/git=/usr/src/debug/bluetooth-sil-bluez5/0.1.0-80-r8  -fmacro-prefix-map=TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/build=/usr/src/debug/bluetooth-sil-bluez5/0.1.0-80-r8  -fdebug-prefix-map=TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/build=/usr/src/debug/bluetooth-sil-bluez5/0.1.0-80-r8  -fdebug-prefix-map=TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot=  -fmacro-prefix-map=TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot=  -fdebug-prefix-map=TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot-native=  -fvisibility-inlines-hidden  -std=c++0x -pthread -ITOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot/usr/include/libmount -ITOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot/usr/include/blkid -ITOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot/usr/include/glib-2.0 -ITOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/recipe-sysroot/usr/lib/glib-2.0/include -pthread -Wl,--no-undefined -DUSE_SYSTEM_BUS_FOR_OBEX -DNDEBUG -fPIC -MD -MT CMakeFiles/bluez5.dir/src/bluez5obexsession.cpp.o -MF CMakeFiles/bluez5.dir/src/bluez5obexsession.cpp.o.d -o CMakeFiles/bluez5.dir/src/bluez5obexsession.cpp.o -c TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/git/src/bluez5obexsession.cpp
In file included from TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/git/src/bluez5obexclient.h:24,
                 from TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/git/src/bluez5obexsession.cpp:18:
TOPDIR/BUILD/work/qemux86_64-webos-linux/bluetooth-sil-bluez5/0.1.0-80-r8/git/src/dbusutils.h:44:17: error: 'uint32_t' does not name a type
   44 |                 uint32_t mWatch;
      |                 ^~~~~~~~

:Testing Performed:
Only build tested.

:QA Notes:
No change to image.

:Issues Addressed:
[WRP-8053] CCC: Various build fixes

Change-Id: I92e98c2736cc90e69df6688eeb1230bbb000d2a0
---
Upstream-Status: Submitted [http://gpro.lge.com/c/webosose/bluetooth-sil-bluez5/+/344555 Fix build with gcc-13]

 src/dbusutils.h | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/dbusutils.h b/src/dbusutils.h
index 940765c..1c02446 100644
--- a/src/dbusutils.h
+++ b/src/dbusutils.h
@@ -17,6 +17,7 @@
 #ifndef DBUSCONNECTION_H
 #define DBUSCONNECTION_H
 
+#include <cstdint>
 #include <functional>
 #include <string>
 

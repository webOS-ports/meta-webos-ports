From 909c2ea3a2af37b7a1100517920ece2dc82149c9 Mon Sep 17 00:00:00 2001
From: Herman van Hazendonk <github.com@herrie.org>
Date: Wed, 7 Dec 2022 07:44:45 +0100
Subject: [PATCH 4/6] [PATCH] WebOSServiceBridgeInjection: fix JSON input test

Passing a JSON array as a parameter to a PalmServiceBridge call would
crash webruntime.

Signed-off-by: Christophe Chapuis <chris.chapuis@gmail.com>
---
 .../renderer/webosservicebridge/webosservicebridge_injection.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/neva/injection/renderer/webosservicebridge/webosservicebridge_injection.cc b/src/neva/injection/renderer/webosservicebridge/webosservicebridge_injection.cc
index 5042b38aae..e71dbc77cf 100644
--- a/src/neva/injection/renderer/webosservicebridge/webosservicebridge_injection.cc
+++ b/src/neva/injection/renderer/webosservicebridge/webosservicebridge_injection.cc
@@ -52,7 +52,7 @@ const char kMethodInvocationAsConstructorOnly[] =
 
 bool IsSubscription(const std::string& param) {
   absl::optional<base::Value> json = base::JSONReader::Read(param);
-  if (!json || !json->is_dict())
+  if (!json && !json->is_dict())
     return false;
 
   const base::Value* subscribe_value =
-- 
2.37.3.windows.1


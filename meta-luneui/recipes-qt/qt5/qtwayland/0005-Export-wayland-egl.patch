From 3bf35e4d69e6b3d60ff2af1a1a3f702b9e481ae0 Mon Sep 17 00:00:00 2001
From: Elvis Lee <kwangwoong.lee@lge.com>
Date: Thu, 16 Jan 2020 15:58:02 +0900
Subject: [PATCH] Export wayland-egl

Change-Id: Ibb8b6063295a6d95f0f56ffc704f5d2ef90304e2

---
 src/exports/exports.pro                            |  2 +-
 src/exports/hardwareintegration/client/client.pro  |  2 ++
 .../client/wayland-egl/wayland-egl.pro             | 14 ++++++++++++++
 .../hardwareintegration/compositor/compositor.pro  |  2 ++
 .../compositor/wayland-egl/wayland-egl.pro         | 14 ++++++++++++++
 .../hardwareintegration/hardwareintegration.pro    |  2 ++
 src/src.pro                                        |  2 +-
 7 files changed, 36 insertions(+), 2 deletions(-)
 create mode 100644 src/exports/hardwareintegration/client/client.pro
 create mode 100644 src/exports/hardwareintegration/client/wayland-egl/wayland-egl.pro
 create mode 100644 src/exports/hardwareintegration/compositor/compositor.pro
 create mode 100644 src/exports/hardwareintegration/compositor/wayland-egl/wayland-egl.pro
 create mode 100644 src/exports/hardwareintegration/hardwareintegration.pro

diff --git a/src/exports/exports.pro b/src/exports/exports.pro
index bc59a319..ddefcc94 100644
--- a/src/exports/exports.pro
+++ b/src/exports/exports.pro
@@ -1,2 +1,2 @@
 TEMPLATE = subdirs
-SUBDIRS += shellintegration
+SUBDIRS += hardwareintegration shellintegration
diff --git a/src/exports/hardwareintegration/client/client.pro b/src/exports/hardwareintegration/client/client.pro
new file mode 100644
index 00000000..2659eb87
--- /dev/null
+++ b/src/exports/hardwareintegration/client/client.pro
@@ -0,0 +1,2 @@
+TEMPLATE = subdirs
+SUBDIRS += wayland-egl
diff --git a/src/exports/hardwareintegration/client/wayland-egl/wayland-egl.pro b/src/exports/hardwareintegration/client/wayland-egl/wayland-egl.pro
new file mode 100644
index 00000000..b248fc20
--- /dev/null
+++ b/src/exports/hardwareintegration/client/wayland-egl/wayland-egl.pro
@@ -0,0 +1,14 @@
+TEMPLATE = lib
+TARGET = Qt5WaylandClientEglWindow
+
+QT = waylandclient waylandclient-private
+CONFIG += no_install_prl
+
+include(../../../../hardwareintegration/client/wayland-egl/wayland-egl.pri)
+
+headers.files = $$HEADERS
+headers.path += $$[QT_INSTALL_HEADERS]/QtWaylandClient/$$MODULE_VERSION/QtWaylandClient/private
+
+target.path = $$[QT_INSTALL_LIBS]
+
+INSTALLS += headers target
diff --git a/src/exports/hardwareintegration/compositor/compositor.pro b/src/exports/hardwareintegration/compositor/compositor.pro
new file mode 100644
index 00000000..2659eb87
--- /dev/null
+++ b/src/exports/hardwareintegration/compositor/compositor.pro
@@ -0,0 +1,2 @@
+TEMPLATE = subdirs
+SUBDIRS += wayland-egl
diff --git a/src/exports/hardwareintegration/compositor/wayland-egl/wayland-egl.pro b/src/exports/hardwareintegration/compositor/wayland-egl/wayland-egl.pro
new file mode 100644
index 00000000..46acf130
--- /dev/null
+++ b/src/exports/hardwareintegration/compositor/wayland-egl/wayland-egl.pro
@@ -0,0 +1,14 @@
+TEMPLATE = lib
+TARGET = Qt5WaylandEglClientBufferIntegration
+
+QT = waylandcompositor waylandcompositor-private
+CONFIG += no_install_prl
+
+include(../../../../hardwareintegration/compositor/wayland-egl/wayland-egl.pri)
+
+headers.files = $$HEADERS
+headers.path += $$[QT_INSTALL_HEADERS]/QtWaylandCompositor/$$MODULE_VERSION/QtWaylandCompositor/private
+
+target.path = $$[QT_INSTALL_LIBS]
+
+INSTALLS += headers target
diff --git a/src/exports/hardwareintegration/hardwareintegration.pro b/src/exports/hardwareintegration/hardwareintegration.pro
new file mode 100644
index 00000000..ca541bf6
--- /dev/null
+++ b/src/exports/hardwareintegration/hardwareintegration.pro
@@ -0,0 +1,2 @@
+TEMPLATE = subdirs
+SUBDIRS += compositor client
diff --git a/src/src.pro b/src/src.pro
index 59114034..4ee931b6 100644
--- a/src/src.pro
+++ b/src/src.pro
@@ -38,6 +38,6 @@ qtConfig(wayland-client)|qtConfig(wayland-server) {
 
 # Exports for webOS
 sub_exports.subdir = exports
-sub_exports.depends += sub_client
+sub_exports.depends += sub_client sub-compositor
 sub_exports.target = sub-exports
 SUBDIRS += sub_exports

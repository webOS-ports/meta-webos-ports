From f0e3fe583a20c5aa6f9e584bcf949430e799a651 Mon Sep 17 00:00:00 2001
From: Simon Busch <morphis@gravedo.de>
Date: Sat, 18 Jan 2014 14:00:45 +0100
Subject: [PATCH 4/4] Adjust cast for wayland EGL API change

Since https://github.com/libhybris/libhybris/commit/13581f2282109b73826ad99a6e4ce97468a01894
we have to provide a wl_resource pointer instead of a wl_buffer one.

Signed-off-by: Simon Busch <morphis@gravedo.de>
---
 .../compositor/wayland-egl/waylandeglclientbufferintegration.cpp    | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/hardwareintegration/compositor/wayland-egl/waylandeglclientbufferintegration.cpp b/src/hardwareintegration/compositor/wayland-egl/waylandeglclientbufferintegration.cpp
index bab99bd..8bb8c86 100644
--- a/src/hardwareintegration/compositor/wayland-egl/waylandeglclientbufferintegration.cpp
+++ b/src/hardwareintegration/compositor/wayland-egl/waylandeglclientbufferintegration.cpp
@@ -201,7 +201,7 @@ bool WaylandEglClientBufferIntegration::isYInverted(struct ::wl_resource *buffer
 
     EGLint isYInverted;
     EGLBoolean ret;
-    ret = d->egl_query_wayland_buffer(d->egl_display, reinterpret_cast<struct ::wl_buffer *>(buffer), EGL_WAYLAND_Y_INVERTED_WL, &isYInverted);
+    ret = d->egl_query_wayland_buffer(d->egl_display, reinterpret_cast<struct ::wl_resource *>(buffer), EGL_WAYLAND_Y_INVERTED_WL, &isYInverted);
 
     // Yes, this looks strange, but the specification says that EGL_FALSE return
     // value (not supported) should be treated the same as EGL_TRUE return value
@@ -251,8 +251,8 @@ QSize WaylandEglClientBufferIntegration::bufferSize(struct ::wl_resource *buffer
     Q_D(const WaylandEglClientBufferIntegration);
 
     int width, height;
-    d->egl_query_wayland_buffer(d->egl_display, reinterpret_cast<struct ::wl_buffer *>(buffer), EGL_WIDTH, &width);
-    d->egl_query_wayland_buffer(d->egl_display, reinterpret_cast<struct ::wl_buffer *>(buffer), EGL_HEIGHT, &height);
+    d->egl_query_wayland_buffer(d->egl_display, reinterpret_cast<struct ::wl_resource *>(buffer), EGL_WIDTH, &width);
+    d->egl_query_wayland_buffer(d->egl_display, reinterpret_cast<struct ::wl_resource *>(buffer), EGL_HEIGHT, &height);
 
     return QSize(width, height);
 }
-- 
1.8.3.2

